!function(){let t;var e;(e=t||(t={}))[e.EMPTY=-2]="EMPTY",e[e.NOT_PRESENT=-1]="NOT_PRESENT",e[e.PRESENT_BUT_NOT_IN_CORRECT_POSITION=0]="PRESENT_BUT_NOT_IN_CORRECT_POSITION",e[e.PRESENT_AND_IN_CORRECT_POSITION=1]="PRESENT_AND_IN_CORRECT_POSITION";function s(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class i{async start(){const t=Math.random();this.wordToGuess=await this.getRandomWordToGuessUseCase.execute(t),this.generateEmptyGuesses(),this.view.start(i.MAXIMUM_NUMBER_OF_TRIES,this.wordToGuess,this.tries,this.triedWords),this.view.addEventListeners(this.wordHandler.bind(this))}async wordHandler(t){const e=await this.getWordGuessesUseCase.execute(t,this.wordToGuess);if(this.tries[this.triedWords.length]=e,this.triedWords.push(t),this.updateView(),this.isWordGuessed(e))return this.view.showWonMessage(),void this.resetGame();this.triedWords.length===i.MAXIMUM_NUMBER_OF_TRIES&&(this.view.showLostMessage(this.wordToGuess),this.resetGame())}resetGame(){this.tries=[],this.triedWords=[],this.start()}updateView(){this.view.printBoard(this.tries,this.triedWords),this.view.clearInput()}generateEmptyGuesses(){for(let e=0;e<i.MAXIMUM_NUMBER_OF_TRIES;e++){const e=[];for(let s=0;s<this.wordToGuess.length;s++)e.push(t.EMPTY);this.tries.push(e)}}isWordGuessed(e){return e.every((e=>e===t.PRESENT_AND_IN_CORRECT_POSITION))}constructor(t,e,s){this.view=t,this.getWordGuessesUseCase=e,this.getRandomWordToGuessUseCase=s,this.wordToGuess="",this.tries=[],this.triedWords=[]}}s(i,"MAXIMUM_NUMBER_OF_TRIES",6);const r=new class{findAll(){return this.fetcher("https://gist.githubusercontent.com/cesalberca/3d0e343842c7697e0f788178e59fb471/raw/22bfe35c910dd02db78fec87fa39ca25cc604816/data.json").then((t=>t.json()))}constructor(t){this.fetcher=t}}(window.fetch.bind(void 0)),o=new class{validate(e,s){return e.split("").map(((e,i)=>e===s[i]?t.PRESENT_AND_IN_CORRECT_POSITION:s.includes(e)?t.PRESENT_BUT_NOT_IN_CORRECT_POSITION:t.NOT_PRESENT))}},n=new class{async execute(t,e){return this.wordValidator.validate(t,e)}constructor(t){this.wordValidator=t}}(o),a=new class{async execute(t){const e=await this.wordsRepository.findAll();return e[Math.floor(t*e.length)]}constructor(t){this.wordsRepository=t}}(r),d=new class{start(t,e,s,i){this.maxRows=t,this.boardLength=e.length,this.printBoard(s,i),this.setInputValidation(e)}printBoard(t,e){this.clearBoard();for(let s=0;s<this.maxRows;s++)this.printRow(t[s],e[s])}addEventListeners(t){this.form.addEventListener("submit",(async e=>{e.preventDefault(),this.element.value&&await t(this.element.value)}))}showWonMessage(){alert("You won! Try again!")}showLostMessage(t){alert(`You lost! The word to guess was ${t}. Try again!`)}clearInput(){this.element.value=""}setInputValidation(t){this.element.setAttribute("maxlength",t.length.toString()),this.element.setAttribute("minlength",t.length.toString())}clearBoard(){this.boardElement.innerHTML=""}printRow(t,e){const s=document.createElement("div");s.classList.add("row");for(let i=0;i<this.boardLength;i++)this.printLetterCell(s,t[i],null==e?void 0:e[i]),this.boardElement.appendChild(s)}printLetterCell(e,s,i){const r=document.createElement("div");r.classList.add("cell"),void 0!==i&&(r.innerHTML=i);let o="";switch(s){case t.NOT_PRESENT:o="not-present";break;case t.PRESENT_AND_IN_CORRECT_POSITION:o="present-and-in-correct-position";break;case t.PRESENT_BUT_NOT_IN_CORRECT_POSITION:o="present-but-not-in-correct-position";break;case t.EMPTY:o="empty"}r.classList.add(o),e.appendChild(r)}constructor(){s(this,"boardElement",document.querySelector("#board")),s(this,"form",document.querySelector("#form")),s(this,"element",document.querySelector("#input")),s(this,"maxRows",6)}};new i(d,n,a).start()}();
//# sourceMappingURL=index.56f45870.js.map
