!function(){"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;let e;var t;(t=e||(e={}))[t.EMPTY=-2]="EMPTY",t[t.NOT_PRESENT=-1]="NOT_PRESENT",t[t.PRESENT_BUT_NOT_IN_CORRECT_POSITION=0]="PRESENT_BUT_NOT_IN_CORRECT_POSITION",t[t.PRESENT_AND_IN_CORRECT_POSITION=1]="PRESENT_AND_IN_CORRECT_POSITION";function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{async start(){const e=Math.random();this.wordToGuess=await this.getRandomWordToGuessUseCase.execute(e),this.generateEmptyGuesses(),this.view.start(r.MAXIMUM_NUMBER_OF_TRIES,this.wordToGuess,this.tries,this.triedWords),this.view.addEventListeners(this.wordHandler.bind(this)),console.log(this.wordToGuess)}async wordHandler(e){const t=await this.getWordGuessesUseCase.execute(e,this.wordToGuess);if(this.tries[this.triedWords.length]=t,this.triedWords.push(e),this.updateView(),this.isWordGuessed(t))return this.view.showWonMessage(),void this.resetGame();this.triedWords.length===r.MAXIMUM_NUMBER_OF_TRIES&&(this.view.showLostMessage(this.wordToGuess),this.resetGame())}resetGame(){this.tries=[],this.triedWords=[],this.start()}updateView(){this.view.printBoard(this.tries,this.triedWords),this.view.clearInput()}generateEmptyGuesses(){for(let t=0;t<r.MAXIMUM_NUMBER_OF_TRIES;t++){const t=[];for(let s=0;s<this.wordToGuess.length;s++)t.push(e.EMPTY);this.tries.push(t)}}isWordGuessed(t){return t.every((t=>t===e.PRESENT_AND_IN_CORRECT_POSITION))}constructor(e,t,s){this.view=e,this.getWordGuessesUseCase=t,this.getRandomWordToGuessUseCase=s,this.wordToGuess="",this.tries=[],this.triedWords=[]}}s(r,"MAXIMUM_NUMBER_OF_TRIES",6);const i=new class{async findAll(){return this.data}constructor(){s(this,"data",["lodash","chalk","eslint","react","dotenv","moment","async","debug","semver","mkdirp","rimraf","yargs","axios","redux","colors","mocha","tslint","jquery","yosay","is-wsl","morgan","ts-pnp","marked","globby","tslib","stylus","execa","enzyme","ramda","prompt","xml2js","figlet","redis","babel","extend","jsdom","sinon","which","karma","mysql","multer","husky","json5","helmet","acorn","bunyan","rollup","precss","clear","config","log4js","npmlog","slash","clone","nconf","yamljs","grunt","xtend","boxen","bcrypt","cookie","assert","events","merge","crypto","color","vinyl","watch","listr","bytes","touch","unzip","bower","github","merge2","plist","global","jszip","faker","xmldom","mockjs","string","pkg-up","cliui","osenv","bn.js","sharp","jshint","verror","opener","buffer","parse5","fresh","wrench","tar-fs","is-ci","ignore","should","expect","arrify","errno","split","upath","wrappy","serve","table","urijs","radium","xcode","vorpal","lowdb","recast","mysql2","jsesc","immer","vuejs","angular"])}},o=new class{validate(t,s){return t.split("").map(((t,r)=>t===s[r]?e.PRESENT_AND_IN_CORRECT_POSITION:s.includes(t)?e.PRESENT_BUT_NOT_IN_CORRECT_POSITION:e.NOT_PRESENT))}},n=new class{async execute(e,t){return this.wordValidator.validate(e,t)}constructor(e){this.wordValidator=e}}(o),a=new class{async execute(e){const t=await this.wordsRepository.findAll();return t[Math.floor(e*t.length)]}constructor(e){this.wordsRepository=e}}(i),l=new class{start(e,t,s,r){this.maxRows=e,this.boardLength=t.length,this.printBoard(s,r),this.setInputValidation(t)}printBoard(e,t){this.clearBoard();for(let s=0;s<this.maxRows;s++)this.printRow(e[s],t[s])}addEventListeners(e){this.form.addEventListener("submit",(async t=>{t.preventDefault(),this.element.value&&await e(this.element.value)}))}showWonMessage(){alert("You won! Try again!")}showLostMessage(e){alert(`You lost! The word to guess was ${e}. Try again!`)}clearInput(){this.element.value=""}setInputValidation(e){this.element.setAttribute("maxlength",e.length.toString()),this.element.setAttribute("minlength",e.length.toString())}clearBoard(){this.boardElement.innerHTML=""}printRow(e,t){const s=this.global.document.createElement("div");s.classList.add("row");for(let r=0;r<this.boardLength;r++)this.printLetterCell(s,e[r],null==t?void 0:t[r]),this.boardElement.appendChild(s)}printLetterCell(t,s,r){const i=this.global.document.createElement("div");i.classList.add("cell"),void 0!==r&&(i.innerHTML=r);let o="";switch(s){case e.NOT_PRESENT:o="not-present";break;case e.PRESENT_AND_IN_CORRECT_POSITION:o="present-and-in-correct-position";break;case e.PRESENT_BUT_NOT_IN_CORRECT_POSITION:o="present-but-not-in-correct-position";break;case e.EMPTY:o="empty"}i.classList.add(o),t.appendChild(i)}constructor(e){this.global=e,this.boardElement=this.global.document.querySelector("#board"),this.form=this.global.document.querySelector("#form"),this.element=this.global.document.querySelector("#input"),this.maxRows=6}}(window);new r(l,n,a).start()}();
//# sourceMappingURL=index.6d2bf951.js.map
