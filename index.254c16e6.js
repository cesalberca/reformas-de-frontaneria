"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;let e;!function(e){e[e.EMPTY=-2]="EMPTY",e[e.NOT_PRESENT=-1]="NOT_PRESENT",e[e.PRESENT_BUT_NOT_IN_CORRECT_POSITION=0]="PRESENT_BUT_NOT_IN_CORRECT_POSITION",e[e.PRESENT_AND_IN_CORRECT_POSITION=1]="PRESENT_AND_IN_CORRECT_POSITION"}(e||(e={}));function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const s=new class{findAll(){return this.global.fetch("https://gist.githubusercontent.com/cesalberca/3d0e343842c7697e0f788178e59fb471/raw/22bfe35c910dd02db78fec87fa39ca25cc604816/data.json").then((e=>e.json()))}constructor(e){this.global=e}}(window),i=new class{validate(t,s){return t===s?Array.from({length:s.length}).fill(e.PRESENT_AND_IN_CORRECT_POSITION):t.split("").map(((t,i)=>t===s[i]?e.PRESENT_AND_IN_CORRECT_POSITION:s.includes(t)?e.PRESENT_BUT_NOT_IN_CORRECT_POSITION:e.NOT_PRESENT))}},r=new class{async execute(e,t){return this.wordValidator.validate(e,t)}constructor(e){this.wordValidator=e}}(i),o=new class{async execute(e){const t=await this.wordsRepository.findAll();return t[Math.floor(e*t.length)]}constructor(e){this.wordsRepository=e}}(s),n=new class{init(e,t,s,i){this.maxRows=e,this.boardLength=t,this.printBoard(s,i)}printBoard(e,t){this.clearBoard();for(let s=0;s<this.maxRows;s++)this.printRow(e[s],t[s])}addEventListeners(e){this.form.addEventListener("submit",(async t=>{t.preventDefault(),this.element.value&&await e(this.element.value)}))}showWonMessage(){alert("You won! Try again!")}showLostMessage(e){alert(`You lost! The word to guess was ${e}. Try again!`)}clearInput(){this.element.value=""}clearBoard(){this.boardElement.innerHTML=""}printRow(e,t){const s=document.createElement("div");s.setAttribute("class","row");for(let i=0;i<this.boardLength;i++)this.printLetterCell(s,e[i],null==t?void 0:t[i]),this.boardElement.appendChild(s)}printLetterCell(t,s,i){const r=document.createElement("div");r.classList.add("cell"),void 0!==i&&(r.innerHTML=i);let o="";switch(s){case e.NOT_PRESENT:o="not-present";break;case e.PRESENT_AND_IN_CORRECT_POSITION:o="present-and-in-correct-position";break;case e.PRESENT_BUT_NOT_IN_CORRECT_POSITION:o="present-but-not-in-correct-position";break;case e.EMPTY:o="empty"}r.classList.add(o),t.appendChild(r)}constructor(){t(this,"boardElement",document.querySelector("#board")),t(this,"form",document.querySelector("#form")),t(this,"element",document.querySelector("#input")),t(this,"maxRows",6)}};new class{resetGame(){this.tries=[],this.triedWords=[],this.init()}updateView(){this.view.printBoard(this.tries,this.triedWords),this.view.clearInput()}generateEmptyGuesses(){for(let t=0;t<this.maximumNumberOfTries;t++){const t=[];for(let s=0;s<this.wordToGuess.length;s++)t.push(e.EMPTY);this.tries.push(t)}}isWordGuessed(t){return t.every((t=>t===e.PRESENT_AND_IN_CORRECT_POSITION))}constructor(e,t,s){this.view=e,this.getWordGuessesUseCase=t,this.getRandomWordToGuessUseCase=s,this.wordToGuess="",this.tries=[],this.triedWords=[],this.maximumNumberOfTries=6,this.init=async()=>{const e=Math.random();this.wordToGuess=await this.getRandomWordToGuessUseCase.execute(e),this.generateEmptyGuesses(),console.log(this.wordToGuess),this.view.init(this.maximumNumberOfTries,this.wordToGuess.length,this.tries,this.triedWords),this.view.addEventListeners(this.wordHandler)},this.wordHandler=async e=>{const t=await this.getWordGuessesUseCase.execute(e,this.wordToGuess);if(this.tries[this.triedWords.length]=t,this.triedWords.push(e),this.updateView(),this.isWordGuessed(t))return this.view.showWonMessage(),void this.resetGame();return this.triedWords.length===this.maximumNumberOfTries&&(this.view.showLostMessage(this.wordToGuess),this.resetGame()),t}}}(n,r,o).init();
//# sourceMappingURL=index.254c16e6.js.map
